# Impactify's iOS SDK
Impactify's iOS SDK for Mobile Native Ads. This is a solution written in Swift and using Google's IMA SDK as a base, you can consider this package to be a wrapper to IMA so it integrates nicely with Impactify's services.

## Google IMA SDK
This package already includes all the necessary dependencies to run IMA and it's 100% required to run this solution. We use IMA to decode VAST and implement Google's tracking events (clicks, pauses, how much of a video has the user seen, etc...).

# Example
Inside the repository we provide an example for our Sticky Floating format. Developers can refer to the example to see how the code is supposed to be structured.

# ImpactifyAd Class
A new instance of the ImpactifyAd class needs to be instanciated. It takes a few parameters:

| Parameter | Required? | Type | Description
|---|---|---|---|
| adOptions | Yes | AdOptions | See documentation below. |
| uiView | Yes | UIView | UIView where the ad will be rendered |
| parentView  | Yes | * | Instance of the class that initializes the ImpactifyAd. Generally "self". |
| appId | Yes | String | App ID provided by Impactify that is used to fetch the config of the VASTs |
| consentString | Yes | String | String generated by your Consent Manager |

Example:
```swift
    self.impactifyAd = Impactify(adOptions: settings, uiView: adView, parentView: self, appId: self.appId, consentString: self.consentString)
```

# AdOptions
AdOptions is used to feed the additional options into the player. Right now the configuration is rather limited to placement and border radius, but future configurability is expected.

| Parameter | Required? | Type | Description
|---|---|---|---|
| placement | No | String | Default: bottom. Placement of the ad, options: "bottom", "top" and "custom" |
| borderRadius | No | Int | Default: 0. Border radius given to the UIView where the ad is rendered |

Example:
```swift
    override func viewDidLoad() {
        let settings = AdOptions(placement: "bottom", cornerRadius: 0)
        self.impactifyAd = Impactify(adOptions: settings, uiView: adView, parentView: self, appId: self.appId, consentString: self.consentString)
    }
```

# ImpactifyAd.load()
Calling the method above will automatically render an ad with the given configuration. Example of an ad being rendered right when the controller is instanciated:

```swift
    override func viewDidAppear(_ animated: Bool) {
        self.impactifyAd.load()
    }
```

# Switching between portrait and landscape mode
The switch between both modes must be controlled from the parent controller. By default, that behaviour can be controlled by calling the ```didRotate``` method in Swift.
If you want the landscape behaviour on your app, add the following code to your controller:

```swift
    override func didRotate(from fromInterfaceOrientation: UIInterfaceOrientation) {
        switch fromInterfaceOrientation {
        case .portrait, .portraitUpsideDown:
            self.impactifyAd.handleLandscape()
            break
        case .landscapeLeft, .landscapeRight, .unknown:
            self.impactifyAd.handlePortrait()
            break
        default:
            self.impactifyAd.handlePortrait()
            break
        }
    }
```

Not adding this piece of code, will make the ad ignore screen rotation events.
You can also integrate that into your app logic by calling the ```ImpactifyAd.handleLandscape()``` or ```ImpactifyAd.handlePortrait()```.

# Whole Example

You'll need to import a View into your UI.
![https://i.imgur.com/s5TP9PK.png](https://i.imgur.com/s5TP9PK.png)

And then simply link it to the outlet adView defined on the controller.
![https://i.imgur.com/FCPzC2G.png](https://i.imgur.com/FCPzC2G.png)

```swift
import AVFoundation
import UIKit

import Impactify

class ViewController: UIViewController {

    // This is an outlet from the View set up on the Storyboard and should be linked here.
    @IBOutlet weak var adView: UIView!
    
    var impactifyAd: Impactify!
    
    // Temporary Consent String
    var consentString = "CONSENT STRING HERE"
    
    // Test App ID
    var appId = "APP ID HERE"
    
    override func viewDidLoad() {
        let settings = AdOptions(placement: "bottom", cornerRadius: 0)
        self.impactifyAd = Impactify(adOptions: settings, uiView: adView, parentView: self, appId: self.appId, consentString: self.consentString)
    }
        
    override func viewDidAppear(_ animated: Bool) {
        self.impactifyAd.load()
    }

}
```
